[env:esp32s3_or_camera]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; ============================================================
; CRITICAL MEMORY SETTINGS FOR FREENOVE S3 (N16R8)
; ============================================================
; 1. Force 16MB Flash Size
board_upload.flash_size = 16MB
board_build.partitions = default_16MB.csv

; 2. Force 8MB Octal (OPI) PSRAM
; This is the magic switch. "qio_opi" enables the high-speed memory lanes.
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi

; ============================================================
; SPEED BOOSTS
; ============================================================
monitor_speed = 115200
upload_speed = 921600

build_flags = 
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    ; Maximize HTTP buffer to prevent network stutter
    -DCORE_DEBUG_LEVEL=3
    -DCONFIG_SPIRAM_MODE_OCT=1

lib_deps =
    espressif/esp32-camera